export type SupportedLang = "az" | "en" | "ru";

export type TranslationKey = keyof typeof STRINGS["az"];

export const STRINGS: Record<SupportedLang, Record<string, string>> = {
  az: {
    tabs_home: "Ana səhifə",
    tabs_statistics: "Statistika",
    tabs_transactions: "Əməliyyatlar",
    tabs_more: "Daha çox",
    language_title: "Dil seçimi",
    language_selected: "Seçildi",
    language_option_az: "Azərbaycan",
    language_option_en: "İngilis",
    language_option_ru: "Rus",
    more_profileFallback: "Profil",
    more_profileHint: "Girişdə yazdığın ad soyad ({name}) avtomatik sinx olunur, dəyişiklikləri buradan et.",
    more_editProfile: "Məlumatları yenilə",
    more_theme_light: "Aydın rejim",
    more_theme_dark: "Qaranlıq rejim",
    more_language: "Dil seçimi",
    more_security: "Təhlükəsizlik ayarları",
    more_whatsapp: "WhatsApp ilə əlaqə",
    more_instagram: "Instagram səhifəsi",
    more_logout: "Çıxış",
    more_version: "ExpenseTracker versiya {version}",
    security_title: "Təhlükəsizlik ayarları",
    security_pinManagement: "PIN idarəetməsi",
    security_currentPin: "Cari PIN",
    security_newPin: "Yeni PIN",
    security_confirmPin: "Təsdiq et",
    security_pinPlaceholder: "Yeni PIN",
    security_pinConfirmPlaceholder: "PIN təsdiqi",
    security_savePin: "PIN-i yadda saxla",
    security_savingPin: "Yadda saxlanılır...",
    security_successTitle: "Uğurlu",
    security_pinUpdated: "PIN yeniləndi.",
    security_errorTitle: "Xəta",
    security_errorCurrent: "Mövcud PIN düzgün deyil.",
    security_errorLength: "PIN minimum 4 rəqəmdən ibarət olmalıdır.",
    security_errorMismatch: "Yeni PIN təsdiqlə eyni deyil.",
    security_pinRequiredTitle: "PIN tələb olunur",
    security_pinRequiredMessage: "Əvvəlcə PIN təyin et, sonra biometrik identifikasiyanı aktivləşdir.",
    security_pinWrongTitle: "PIN düzgün deyil",
    security_pinWrongMessage: "Biometrik ayarlar üçün mövcud PIN-i doğru daxil etməlisən.",
    security_bioUnsupportedTitle: "Uyğun deyil",
    security_bioUnsupportedMessage: "Bu cihaz biometrik identifikasiyanı dəstəkləmir.",
    security_bioPrompt: "Biometrik təsdiq",
    security_bioFallback: "PIN ilə davam et",
    security_bioFailedTitle: "Uğursuz",
    security_bioFailedMessage: "Biometrik təsdiq alınmadı.",
    security_bioReadyTitle: "Hazırdır",
    security_bioEnabled: "Biometrik giriş aktiv edildi.",
    security_bioDisabled: "Biometrik giriş deaktiv edildi.",
    security_biometricsTitle: "Biometrik giriş",
    security_biometricsSupported: "Dəstəklənənlər: {types}",
    security_biometricsNotSupported: "Bu cihaz biometrik identifikasiyanı dəstəkləmir.",
    security_toggleChecking: "Yoxlanılır...",
    security_toggleDisable: "Deaktiv et",
    security_toggleEnable: "Aktiv et",
    security_bioInfo: "Biometrik giriş üçün əvvəlcə mövcud PIN-i daxil edib təsdiqlə.",
    security_bioFingerprint: "Barmaq izi",
    security_bioFaceId: "Face ID",
    security_bioGeneric: "Biometrik",
  },
  en: {
    tabs_home: "Home",
    tabs_statistics: "Statistics",
    tabs_transactions: "Transactions",
    tabs_more: "More",
    language_title: "Language",
    language_selected: "Selected",
    language_option_az: "Azerbaijani",
    language_option_en: "English",
    language_option_ru: "Russian",
    more_profileFallback: "Profile",
    more_profileHint: "The name and surname you entered ({name}) stay in sync, edit them here.",
    more_editProfile: "Update info",
    more_theme_light: "Light mode",
    more_theme_dark: "Dark mode",
    more_language: "Language",
    more_security: "Security settings",
    more_whatsapp: "Contact via WhatsApp",
    more_instagram: "Instagram page",
    more_logout: "Log out",
    more_version: "ExpenseTracker version {version}",
    security_title: "Security settings",
    security_pinManagement: "PIN management",
    security_currentPin: "Current PIN",
    security_newPin: "New PIN",
    security_confirmPin: "Confirm",
    security_pinPlaceholder: "New PIN",
    security_pinConfirmPlaceholder: "Confirm PIN",
    security_savePin: "Save PIN",
    security_savingPin: "Saving...",
    security_successTitle: "Success",
    security_pinUpdated: "PIN updated.",
    security_errorTitle: "Error",
    security_errorCurrent: "Current PIN is incorrect.",
    security_errorLength: "PIN must contain at least 4 digits.",
    security_errorMismatch: "New PIN and confirmation do not match.",
    security_pinRequiredTitle: "PIN required",
    security_pinRequiredMessage: "Set a PIN first before enabling biometrics.",
    security_pinWrongTitle: "Wrong PIN",
    security_pinWrongMessage: "Enter the existing PIN correctly to manage biometrics.",
    security_bioUnsupportedTitle: "Not supported",
    security_bioUnsupportedMessage: "This device does not support biometric authentication.",
    security_bioPrompt: "Biometric verification",
    security_bioFallback: "Continue with PIN",
    security_bioFailedTitle: "Failed",
    security_bioFailedMessage: "Biometric verification failed.",
    security_bioReadyTitle: "All set",
    security_bioEnabled: "Biometric sign in enabled.",
    security_bioDisabled: "Biometric sign in disabled.",
    security_biometricsTitle: "Biometric sign in",
    security_biometricsSupported: "Supported: {types}",
    security_biometricsNotSupported: "This device does not support biometric authentication.",
    security_toggleChecking: "Checking...",
    security_toggleDisable: "Disable",
    security_toggleEnable: "Enable",
    security_bioInfo: "Enter and confirm your existing PIN before using biometrics.",
    security_bioFingerprint: "Fingerprint",
    security_bioFaceId: "Face ID",
    security_bioGeneric: "Biometric",
  },
  ru: {
    tabs_home: "Главная",
    tabs_statistics: "Статистика",
    tabs_transactions: "Операции",
    tabs_more: "Ещё",
    language_title: "Выбор языка",
    language_selected: "Выбрано",
    language_option_az: "Азербайджанский",
    language_option_en: "Английский",
    language_option_ru: "Русский",
    more_profileFallback: "Профиль",
    more_profileHint: "Имя и фамилия ({name}) синхронизируются автоматически, изменяйте их здесь.",
    more_editProfile: "Обновить данные",
    more_theme_light: "Светлая тема",
    more_theme_dark: "Тёмная тема",
    more_language: "Язык",
    more_security: "Настройки безопасности",
    more_whatsapp: "Связаться в WhatsApp",
    more_instagram: "Страница Instagram",
    more_logout: "Выйти",
    more_version: "ExpenseTracker версия {version}",
    security_title: "Настройки безопасности",
    security_pinManagement: "Управление PIN",
    security_currentPin: "Текущий PIN",
    security_newPin: "Новый PIN",
    security_confirmPin: "Подтвердить",
    security_pinPlaceholder: "Новый PIN",
    security_pinConfirmPlaceholder: "Подтверждение PIN",
    security_savePin: "Сохранить PIN",
    security_savingPin: "Сохранение...",
    security_successTitle: "Готово",
    security_pinUpdated: "PIN обновлён.",
    security_errorTitle: "Ошибка",
    security_errorCurrent: "Текущий PIN неверен.",
    security_errorLength: "PIN должен содержать минимум 4 цифры.",
    security_errorMismatch: "Новый PIN и подтверждение не совпадают.",
    security_pinRequiredTitle: "Требуется PIN",
    security_pinRequiredMessage: "Сначала задайте PIN, затем включайте биометрию.",
    security_pinWrongTitle: "Неверный PIN",
    security_pinWrongMessage: "Введите текущий PIN правильно, чтобы управлять биометрией.",
    security_bioUnsupportedTitle: "Не поддерживается",
    security_bioUnsupportedMessage: "Это устройство не поддерживает биометрию.",
    security_bioPrompt: "Биометрическая проверка",
    security_bioFallback: "Продолжить с PIN",
    security_bioFailedTitle: "Не удалось",
    security_bioFailedMessage: "Биометрическая проверка не выполнена.",
    security_bioReadyTitle: "Готово",
    security_bioEnabled: "Биометрический вход включён.",
    security_bioDisabled: "Биометрический вход выключен.",
    security_biometricsTitle: "Биометрический вход",
    security_biometricsSupported: "Поддерживается: {types}",
    security_biometricsNotSupported: "Это устройство не поддерживает биометрию.",
    security_toggleChecking: "Проверка...",
    security_toggleDisable: "Отключить",
    security_toggleEnable: "Включить",
    security_bioInfo: "Перед биометрией введите и подтвердите текущий PIN.",
    security_bioFingerprint: "Отпечаток пальца",
    security_bioFaceId: "Face ID",
    security_bioGeneric: "Биометрия",
  },
};

export const translate = (
  lang: SupportedLang,
  key: TranslationKey,
  params?: Record<string, string | number>
): string => {
  const fallback = STRINGS.az[key] ?? key;
  const raw = STRINGS[lang]?.[key] ?? fallback;
  if (!params) return raw;
  return Object.keys(params).reduce((acc, paramKey) => {
    const regex = new RegExp(`{${paramKey}}`, "g");
    return acc.replace(regex, String(params[paramKey]));
  }, raw);
};
